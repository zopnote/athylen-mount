
if (NOT CJSON_DIRECTORY)
    message(FATAL_ERROR "CJSON_DIRECTORY is not set!")
endif()

set(CJSON_INCLUSION_DIRECTORY ${CMAKE_BINARY_DIR}/cJSON)

file(COPY ${CJSON_DIRECTORY}/cJSON.c DESTINATION ${CJSON_INCLUSION_DIRECTORY}/cjson)
file(COPY ${CJSON_DIRECTORY}/cJSON.h DESTINATION ${CJSON_INCLUSION_DIRECTORY}/cjson)

add_library(cjson STATIC ${CJSON_INCLUSION_DIRECTORY}/cjson/cJSON.c)

set(CJSON_BINARY_LIB ${CMAKE_BINARY_DIR}/libcjson.a)

add_library(CJSON INTERFACE)

target_include_directories(CJSON INTERFACE ${CJSON_INCLUSION_DIRECTORY})

target_link_libraries(CJSON INTERFACE ${CJSON_BINARY_LIB})